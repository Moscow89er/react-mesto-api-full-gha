{"ast":null,"code":"var _s = $RefreshSig$();\nimport React from 'react';\nimport { validateForm } from './validateForm.js';\nfunction useFormValidator(componentName) {\n  _s();\n  const [formValues, setFormValues] = React.useState({});\n  const [formErrors, setFormErrors] = React.useState({});\n  const [isValid, setIsValid] = React.useState(true);\n  const [isFilled, setIsFilled] = React.useState(false);\n  const setIsValidCallback = React.useCallback(valid => setIsValid(valid), []);\n  const handleInputChange = React.useCallback(evt => {\n    setIsFilled(true);\n    const {\n      name,\n      value\n    } = evt.target;\n    setFormValues({\n      ...formValues,\n      [name]: value\n    });\n    setFormErrors({\n      ...formErrors,\n      [componetnName]: {\n        ...formErrors[componentName],\n        [name]: evt.target.validationMessage\n      }\n    });\n    setIsValid(evt.target.closest('form').checkValidity());\n  });\n  const resetForm = React.useCallback(() => {\n    setIsFilled(false);\n    setFormValues({});\n    setFormErrors({});\n    setIsValid(false);\n  }, []);\n  React.useEffect(() => {\n    if (!isFilled) {\n      setFormErrors({});\n      setIsValid(true);\n      return;\n    }\n    setIsValidCallback(false);\n    validateForm(formValues, setFormErrors, setIsValidCallback);\n  }, [formValues, setFormErrors, setIsValidCallback, isFilled]);\n  return {\n    formValues,\n    formErrors,\n    isValid,\n    handleInputChange,\n    resetForm\n  };\n}\n_s(useFormValidator, \"62ZsOtYEejd4+5ZD6DCIr356e0o=\");\nexport default useFormValidator;","map":{"version":3,"names":["React","validateForm","useFormValidator","componentName","_s","formValues","setFormValues","useState","formErrors","setFormErrors","isValid","setIsValid","isFilled","setIsFilled","setIsValidCallback","useCallback","valid","handleInputChange","evt","name","value","target","componetnName","validationMessage","closest","checkValidity","resetForm","useEffect"],"sources":["C:/Users/Batumi_89er/dev/mesto-react/src/utils/useFormValidator.js"],"sourcesContent":["import React from 'react';\r\nimport { validateForm } from './validateForm.js';\r\n\r\nfunction useFormValidator (componentName) {\r\n    const [formValues, setFormValues] = React.useState({});\r\n    const [formErrors, setFormErrors] = React.useState({});\r\n    const [isValid, setIsValid] = React.useState(true);\r\n    const [isFilled, setIsFilled] = React.useState(false);\r\n    const setIsValidCallback = React.useCallback((valid) => setIsValid(valid), []);\r\n\r\n    const handleInputChange = React.useCallback((evt) => {\r\n        setIsFilled(true);\r\n        const  { name, value } = evt.target;\r\n        setFormValues({...formValues, [name]: value});\r\n        setFormErrors({...formErrors, [componetnName]: {...formErrors[componentName], [name]: evt.target.validationMessage}});\r\n        setIsValid(evt.target.closest('form').checkValidity());\r\n    });\r\n\r\n    const resetForm = React.useCallback(() => {\r\n        setIsFilled(false);\r\n        setFormValues({});\r\n        setFormErrors({});\r\n        setIsValid(false);\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        if (!isFilled) {\r\n            setFormErrors({});\r\n            setIsValid(true);\r\n            return;\r\n        }\r\n        setIsValidCallback(false);\r\n        validateForm(formValues, setFormErrors, setIsValidCallback);\r\n    }, [formValues, setFormErrors, setIsValidCallback, isFilled]);\r\n\r\n    return { formValues, formErrors, isValid, handleInputChange, resetForm };\r\n}\r\n\r\nexport default useFormValidator;"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,YAAY,QAAQ,mBAAmB;AAEhD,SAASC,gBAAgBA,CAAEC,aAAa,EAAE;EAAAC,EAAA;EACtC,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGN,KAAK,CAACO,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtD,MAAM,CAACC,UAAU,EAAEC,aAAa,CAAC,GAAGT,KAAK,CAACO,QAAQ,CAAC,CAAC,CAAC,CAAC;EACtD,MAAM,CAACG,OAAO,EAAEC,UAAU,CAAC,GAAGX,KAAK,CAACO,QAAQ,CAAC,IAAI,CAAC;EAClD,MAAM,CAACK,QAAQ,EAAEC,WAAW,CAAC,GAAGb,KAAK,CAACO,QAAQ,CAAC,KAAK,CAAC;EACrD,MAAMO,kBAAkB,GAAGd,KAAK,CAACe,WAAW,CAAEC,KAAK,IAAKL,UAAU,CAACK,KAAK,CAAC,EAAE,EAAE,CAAC;EAE9E,MAAMC,iBAAiB,GAAGjB,KAAK,CAACe,WAAW,CAAEG,GAAG,IAAK;IACjDL,WAAW,CAAC,IAAI,CAAC;IACjB,MAAO;MAAEM,IAAI;MAAEC;IAAM,CAAC,GAAGF,GAAG,CAACG,MAAM;IACnCf,aAAa,CAAC;MAAC,GAAGD,UAAU;MAAE,CAACc,IAAI,GAAGC;IAAK,CAAC,CAAC;IAC7CX,aAAa,CAAC;MAAC,GAAGD,UAAU;MAAE,CAACc,aAAa,GAAG;QAAC,GAAGd,UAAU,CAACL,aAAa,CAAC;QAAE,CAACgB,IAAI,GAAGD,GAAG,CAACG,MAAM,CAACE;MAAiB;IAAC,CAAC,CAAC;IACrHZ,UAAU,CAACO,GAAG,CAACG,MAAM,CAACG,OAAO,CAAC,MAAM,CAAC,CAACC,aAAa,EAAE,CAAC;EAC1D,CAAC,CAAC;EAEF,MAAMC,SAAS,GAAG1B,KAAK,CAACe,WAAW,CAAC,MAAM;IACtCF,WAAW,CAAC,KAAK,CAAC;IAClBP,aAAa,CAAC,CAAC,CAAC,CAAC;IACjBG,aAAa,CAAC,CAAC,CAAC,CAAC;IACjBE,UAAU,CAAC,KAAK,CAAC;EACrB,CAAC,EAAE,EAAE,CAAC;EAENX,KAAK,CAAC2B,SAAS,CAAC,MAAM;IAClB,IAAI,CAACf,QAAQ,EAAE;MACXH,aAAa,CAAC,CAAC,CAAC,CAAC;MACjBE,UAAU,CAAC,IAAI,CAAC;MAChB;IACJ;IACAG,kBAAkB,CAAC,KAAK,CAAC;IACzBb,YAAY,CAACI,UAAU,EAAEI,aAAa,EAAEK,kBAAkB,CAAC;EAC/D,CAAC,EAAE,CAACT,UAAU,EAAEI,aAAa,EAAEK,kBAAkB,EAAEF,QAAQ,CAAC,CAAC;EAE7D,OAAO;IAAEP,UAAU;IAAEG,UAAU;IAAEE,OAAO;IAAEO,iBAAiB;IAAES;EAAU,CAAC;AAC5E;AAACtB,EAAA,CAjCQF,gBAAgB;AAmCzB,eAAeA,gBAAgB"},"metadata":{},"sourceType":"module","externalDependencies":[]}