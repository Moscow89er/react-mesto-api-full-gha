{"ast":null,"code":"import _defineProperty from\"C:/Users/Batumi_89er/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/Batumi_89er/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Batumi_89er/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{useNavigate}from\"react-router-dom\";import*as auth from'../utils/auth.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(_ref){var onLoggedIn=_ref.onLoggedIn,openInfoTooltip=_ref.openInfoTooltip,onError=_ref.onError;var _useState=useState({password:'',email:''}),_useState2=_slicedToArray(_useState,2),formValue=_useState2[0],setFormValue=_useState2[1];var navigate=useNavigate();var handleChange=function handleChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;setFormValue(_objectSpread(_objectSpread({},formValue),{},_defineProperty({},name,value)));};var handleSubmit=function handleSubmit(evt){evt.preventDefault();if(!formValue.password||!formValue.email){return;}auth.authorize(formValue.password,formValue.email).then(function(data){if(data.token){setFormValue({password:'',email:''});onLoggedIn();navigate('/',{replace:true});}}).catch(function(err){onError(true);openInfoTooltip(true);console.log(err);});};return/*#__PURE__*/_jsxs(\"section\",{className:\"form form-login\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"form__title form__title-login\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"form__type__form\",children:[/*#__PURE__*/_jsx(\"input\",{value:formValue.email,onChange:handleChange,type:\"email\",name:\"email\",placeholder:\"Email\",className:\"form__input form__input-login\"}),/*#__PURE__*/_jsx(\"input\",{value:formValue.password,onChange:handleChange,type:\"password\",name:\"password\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",className:\"form__input form__input-login\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"form__submit-button form__submit-button-login\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]})]});}export default Login;","map":{"version":3,"names":["React","useState","useNavigate","auth","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLoggedIn","openInfoTooltip","onError","_useState","password","email","_useState2","_slicedToArray","formValue","setFormValue","navigate","handleChange","evt","_evt$target","target","name","value","_objectSpread","_defineProperty","handleSubmit","preventDefault","authorize","then","data","token","replace","catch","err","console","log","className","children","onSubmit","onChange","type","placeholder"],"sources":["C:/Users/Batumi_89er/dev/react-mesto-auth/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport * as auth from '../utils/auth.js';\r\n\r\nfunction Login ({ onLoggedIn, openInfoTooltip, onError }) {\r\n    const [formValue, setFormValue] = useState({\r\n        password: '',\r\n        email: ''\r\n    })\r\n\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (evt) => {\r\n        const {name, value} = evt.target;\r\n\r\n        setFormValue({\r\n            ...formValue,\r\n            [name]: value\r\n        });\r\n    }\r\n\r\n    const handleSubmit = (evt) => {\r\n        evt.preventDefault();\r\n\r\n        if (!formValue.password || !formValue.email) {\r\n            return;\r\n        }\r\n        auth.authorize(formValue.password, formValue.email)\r\n            .then((data) => {\r\n                if (data.token) {\r\n                    setFormValue({password:'', email: ''});\r\n                    onLoggedIn();\r\n                    navigate('/', {replace: true});\r\n                }\r\n            })\r\n            .catch((err) => {\r\n                onError(true);\r\n                openInfoTooltip(true);\r\n                console.log(err);\r\n            });\r\n    }\r\n\r\n    return (\r\n        <section className=\"form form-login\">\r\n            <h1 className=\"form__title form__title-login\">Вход</h1>\r\n            <form onSubmit={handleSubmit} className=\"form__type__form\">\r\n                <input\r\n                    value={formValue.email}\r\n                    onChange={handleChange}\r\n                    type=\"email\"\r\n                    name=\"email\"\r\n                    placeholder=\"Email\"\r\n                    className=\"form__input form__input-login\"\r\n                />\r\n                <input\r\n                    value={formValue.password}\r\n                    onChange={handleChange}\r\n                    type=\"password\"\r\n                    name=\"password\"\r\n                    placeholder=\"Пароль\"\r\n                    className=\"form__input form__input-login\"\r\n                />\r\n                <button\r\n                    type=\"submit\"\r\n                    className=\"form__submit-button form__submit-button-login\"\r\n                    >Войти\r\n                </button>\r\n            </form>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}