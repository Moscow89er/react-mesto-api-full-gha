{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Batumi_89er/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Batumi_89er/dev/mesto-react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import Header from'./Header.js';import Main from'./Main.js';import Footer from'./Footer.js';import PopupWithForm from'./PopupWithForm.js';import api from'../utils/api.js';import ImagePopup from'./ImagePopup.js';import CurrentUserContext from'../contexts/CurrentUserContext.js';import EditProfilePopup from'./EditProfilePopup.js';import EditAvatarPopup from'./EditAvatarPopup.js';import AddPlacePopup from'./AddPlacePopup.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsisAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState([]),_React$useState8=_slicedToArray(_React$useState7,2),cards=_React$useState8[0],setCards=_React$useState8[1];var _React$useState9=React.useState(null),_React$useState10=_slicedToArray(_React$useState9,2),selectedCard=_React$useState10[0],setSelectedCard=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),currentUser=_React$useState12[0],setCurrentUser=_React$useState12[1];function handleCardClick(card){setSelectedCard(card);};function handleAddPlaceSubmit(data){api.addNewCard(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});};function handleCardLike(card){var isLiked=card.likes.some(function(i){return i._id===currentUser._id;});api.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return console.log(err);});};function handleCardDelete(card){api.deleteCard(card._id).then(function(){setCards(function(cards){return cards.filter(function(c){return c._id!==card._id;});});}).catch(function(err){return console.log(err);});};function handleUpdateUser(userData){api.editUserInfo(userData).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){return console.log(err);});};function handleUpdateAvatar(userData){api.editUserAvatar(userData).then(function(data){setCurrentUser(data);closeAllPopups();}).catch(function(err){return console.log(err);});};function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);};function handleEditProfileClick(){setIsEditProfilePopupOpen(true);};function handleAddPlaceClick(){setIsisAddPlacePopupOpen(true);};function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsEditProfilePopupOpen(false);setIsisAddPlacePopupOpen(false);setSelectedCard(null);};React.useEffect(function(){api.getUserInfo().then(function(data){setCurrentUser(data);}).catch(function(err){return console.log(err);});},[]);React.useEffect(function(){api.getInitialCards().then(function(cards){setCards(cards);}).catch(function(err){return console.log(err);});},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{cards:cards,onEditAvatar:handleEditAvatarClick,onAddPlace:handleAddPlaceClick,onEditProfile:handleEditProfileClick,onCardClick:handleCardClick,handleCardLike:handleCardLike,handleCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(PopupWithForm,{name:\"confirm\",title:\"\\u0412\\u044B \\u0443\\u0432\\u0435\\u0440\\u0435\\u043D\\u044B?\",buttonText:\"\\u0414\\u0430\"}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]})});}export default App;","map":{"version":3,"names":["React","Header","Main","Footer","PopupWithForm","api","ImagePopup","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","jsx","_jsx","jsxs","_jsxs","App","_React$useState","useState","_React$useState2","_slicedToArray","isEditProfilePopupOpen","setIsEditProfilePopupOpen","_React$useState3","_React$useState4","isAddPlacePopupOpen","setIsisAddPlacePopupOpen","_React$useState5","_React$useState6","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","_React$useState7","_React$useState8","cards","setCards","_React$useState9","_React$useState10","selectedCard","setSelectedCard","_React$useState11","_React$useState12","currentUser","setCurrentUser","handleCardClick","card","handleAddPlaceSubmit","data","addNewCard","then","newCard","concat","_toConsumableArray","closeAllPopups","catch","err","console","log","handleCardLike","isLiked","likes","some","i","_id","changeLikeCardStatus","state","map","c","handleCardDelete","deleteCard","filter","handleUpdateUser","userData","editUserInfo","handleUpdateAvatar","editUserAvatar","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","useEffect","getUserInfo","getInitialCards","children","Provider","value","onEditAvatar","onAddPlace","onEditProfile","onCardClick","isOpen","onClose","onUpdateUser","onUpdateAvatar","name","title","buttonText"],"sources":["C:/Users/Batumi_89er/dev/mesto-react/src/components/App.js"],"sourcesContent":["import React from 'react';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport api from '../utils/api.js';\nimport ImagePopup from './ImagePopup.js';\nimport CurrentUserContext from '../contexts/CurrentUserContext.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport AddPlacePopup from './AddPlacePopup.js';\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsisAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState([]);\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n  };\n\n  function handleAddPlaceSubmit(data) {\n    api.addNewCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n      })\n      .catch((err) => console.log(err));\n  };\n\n  function handleCardDelete(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards((cards) => cards.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => console.log(err));\n  };\n\n  function handleUpdateUser(userData) {\n    api.editUserInfo(userData)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  function handleUpdateAvatar(userData) {\n    api.editUserAvatar(userData)\n      .then((data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  };\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  };\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  };\n\n  function handleAddPlaceClick() {\n    setIsisAddPlacePopupOpen(true);\n  };\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsisAddPlacePopupOpen(false);\n    setSelectedCard(null);\n  };\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then((data) => {\n        setCurrentUser(data);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  React.useEffect(() => {\n    api.getInitialCards()\n      .then((cards) => {\n        setCards(cards);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  return (\n    <div>\n      <CurrentUserContext.Provider value={currentUser}>\n        <Header />\n        <Main\n          cards={cards}\n          onEditAvatar={handleEditAvatarClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditProfile={handleEditProfileClick}\n          onCardClick={handleCardClick}\n          handleCardLike={handleCardLike}\n          handleCardDelete={handleCardDelete}\n        />\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <AddPlacePopup\n          isOpen={isAddPlacePopupOpen}\n          onClose={closeAllPopups}\n          onAddPlace={handleAddPlaceSubmit}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar={handleUpdateAvatar}\n        />\n        <PopupWithForm name=\"confirm\" title=\"Вы уверены?\" buttonText=\"Да\"></PopupWithForm>\n        <ImagePopup card={selectedCard} onClose={closeAllPopups}/>\n      </CurrentUserContext.Provider>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}