{"ast":null,"code":"import{useRef,useEffect}from'react';import PopupWithForm from'./PopupWithForm.js';import useFormValidator from'../utils/useFormValidator.js';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditAvatarPopup(_ref){var isOpen=_ref.isOpen,onClose=_ref.onClose,onUpdateAvatar=_ref.onUpdateAvatar,isLoading=_ref.isLoading;var avatarRef=useRef('');var _useFormValidator=useFormValidator(),formValues=_useFormValidator.formValues,formErrors=_useFormValidator.formErrors,isValid=_useFormValidator.isValid,handleInputChange=_useFormValidator.handleInputChange,resetForm=_useFormValidator.resetForm;function handleSubmit(evt){evt.preventDefault();onUpdateAvatar({avatar:avatarRef.current.value});};useEffect(function(){if(!isOpen){resetForm();}avatarRef.current.value=null;},[isOpen,resetForm]);return/*#__PURE__*/_jsxs(PopupWithForm,{isOpen:isOpen,onClose:onClose,handleSubmit:handleSubmit,isLoading:isLoading,isFormValid:isValid,name:\"avatar\",title:\"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",buttonText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\",buttonLoadingText:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0435\\u043D\\u0438\\u0435...\",children:[/*#__PURE__*/_jsx(\"input\",{ref:avatarRef,id:\"avatarlink\",type:\"url\",name:\"avatarlink\",onChange:handleInputChange,placeholder:\"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\",className:\"popup__input popup__input_type_avatarlink\",required:true}),!isValid&&formValues.avatarlink&&/*#__PURE__*/_jsx(\"div\",{className:\"popup__form-error-avatar\",children:formErrors.avatarlink})]});}export default EditAvatarPopup;","map":{"version":3,"names":["useRef","useEffect","PopupWithForm","useFormValidator","jsx","_jsx","jsxs","_jsxs","EditAvatarPopup","_ref","isOpen","onClose","onUpdateAvatar","isLoading","avatarRef","_useFormValidator","formValues","formErrors","isValid","handleInputChange","resetForm","handleSubmit","evt","preventDefault","avatar","current","value","isFormValid","name","title","buttonText","buttonLoadingText","children","ref","id","type","onChange","placeholder","className","required","avatarlink"],"sources":["C:/Users/Batumi_89er/dev/mesto-react/src/components/EditAvatarPopup.js"],"sourcesContent":["import { useRef, useEffect } from 'react';\r\nimport PopupWithForm from './PopupWithForm.js';\r\nimport useFormValidator from '../utils/useFormValidator.js';\r\n\r\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar, isLoading }) {\r\n    const avatarRef = useRef('');\r\n    const { formValues, formErrors, isValid, handleInputChange, resetForm } = useFormValidator(); \r\n\r\n    function handleSubmit(evt) {\r\n        evt.preventDefault();\r\n\r\n        onUpdateAvatar({\r\n            avatar: avatarRef.current.value\r\n        });\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (!isOpen) {\r\n            resetForm();\r\n        }\r\n\r\n        avatarRef.current.value = null;\r\n    }, [isOpen, resetForm]);\r\n\r\n    return (\r\n        <PopupWithForm\r\n            isOpen={isOpen}\r\n            onClose={onClose}\r\n            handleSubmit={handleSubmit}\r\n            isLoading={isLoading}\r\n            isFormValid={isValid}\r\n            name=\"avatar\"\r\n            title=\"Обновить аватар\"\r\n            buttonText=\"Сохранить\"\r\n            buttonLoadingText=\"Сохранение...\"\r\n        >\r\n            <input\r\n                ref={avatarRef}\r\n                id=\"avatarlink\"\r\n                type=\"url\"\r\n                name=\"avatarlink\"\r\n                onChange={handleInputChange}\r\n                placeholder=\"Ссылка на аватар\"\r\n                className=\"popup__input popup__input_type_avatarlink\"\r\n                required\r\n            />\r\n            {!isValid && formValues.avatarlink && <div className=\"popup__form-error-avatar\">{formErrors.avatarlink}</div>}\r\n        </PopupWithForm>\r\n    );\r\n}\r\n\r\nexport default EditAvatarPopup;"],"mappings":"AAAA,OAASA,MAAM,CAAEC,SAAS,KAAQ,OAAO,CACzC,MAAO,CAAAC,aAAa,KAAM,oBAAoB,CAC9C,MAAO,CAAAC,gBAAgB,KAAM,8BAA8B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5D,QAAS,CAAAC,eAAeA,CAAAC,IAAA,CAAiD,IAA9C,CAAAC,MAAM,CAAAD,IAAA,CAANC,MAAM,CAAEC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAEC,cAAc,CAAAH,IAAA,CAAdG,cAAc,CAAEC,SAAS,CAAAJ,IAAA,CAATI,SAAS,CACjE,GAAM,CAAAC,SAAS,CAAGd,MAAM,CAAC,EAAE,CAAC,CAC5B,IAAAe,iBAAA,CAA0EZ,gBAAgB,EAAE,CAApFa,UAAU,CAAAD,iBAAA,CAAVC,UAAU,CAAEC,UAAU,CAAAF,iBAAA,CAAVE,UAAU,CAAEC,OAAO,CAAAH,iBAAA,CAAPG,OAAO,CAAEC,iBAAiB,CAAAJ,iBAAA,CAAjBI,iBAAiB,CAAEC,SAAS,CAAAL,iBAAA,CAATK,SAAS,CAErE,QAAS,CAAAC,YAAYA,CAACC,GAAG,CAAE,CACvBA,GAAG,CAACC,cAAc,EAAE,CAEpBX,cAAc,CAAC,CACXY,MAAM,CAAEV,SAAS,CAACW,OAAO,CAACC,KAC9B,CAAC,CAAC,CACN,CAAC,CAEDzB,SAAS,CAAC,UAAM,CACZ,GAAI,CAACS,MAAM,CAAE,CACTU,SAAS,EAAE,CACf,CAEAN,SAAS,CAACW,OAAO,CAACC,KAAK,CAAG,IAAI,CAClC,CAAC,CAAE,CAAChB,MAAM,CAAEU,SAAS,CAAC,CAAC,CAEvB,mBACIb,KAAA,CAACL,aAAa,EACVQ,MAAM,CAAEA,MAAO,CACfC,OAAO,CAAEA,OAAQ,CACjBU,YAAY,CAAEA,YAAa,CAC3BR,SAAS,CAAEA,SAAU,CACrBc,WAAW,CAAET,OAAQ,CACrBU,IAAI,CAAC,QAAQ,CACbC,KAAK,CAAC,uFAAiB,CACvBC,UAAU,CAAC,wDAAW,CACtBC,iBAAiB,CAAC,iEAAe,CAAAC,QAAA,eAEjC3B,IAAA,UACI4B,GAAG,CAAEnB,SAAU,CACfoB,EAAE,CAAC,YAAY,CACfC,IAAI,CAAC,KAAK,CACVP,IAAI,CAAC,YAAY,CACjBQ,QAAQ,CAAEjB,iBAAkB,CAC5BkB,WAAW,CAAC,wFAAkB,CAC9BC,SAAS,CAAC,2CAA2C,CACrDC,QAAQ,OACV,CACD,CAACrB,OAAO,EAAIF,UAAU,CAACwB,UAAU,eAAInC,IAAA,QAAKiC,SAAS,CAAC,0BAA0B,CAAAN,QAAA,CAAEf,UAAU,CAACuB,UAAU,EAAO,GACjG,CAExB,CAEA,cAAe,CAAAhC,eAAe"},"metadata":{},"sourceType":"module","externalDependencies":[]}